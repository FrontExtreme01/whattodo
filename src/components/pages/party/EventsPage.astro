---
import { getI18N } from "@/i18n";
import { getSlides } from "@/img/allImages";
import { getLangFromUrl, useTranslatedPath } from "@/i18n/utils";
import { getPartiesEvent } from "@/content/config";

import BaseLayout from "@/layouts/BaseLayout.astro";
import SliderBanner from "@/components/global/SliderBanner";
import Intro from "@components/global/Intro.astro";
import Partners from "@/components/global/Partners";
import PartyCard from "@/components/cards/PartyCard.astro";

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

const lang = getLangFromUrl(Astro.url);
const allParties = await getPartiesEvent(lang);
const translatedPath = useTranslatedPath(lang);

const slides = getSlides("EVENTS", lang);

const seoMetaDatos = {
    title: i18n.SEO.PARTY_PAGE.EVENTS.TITLE,
    description: i18n.SEO.PARTY_PAGE.EVENTS.DESCRIPTION,
    keywords: i18n.SEO.PARTY_PAGE.EVENTS.KEYWORDS,
};
---

<BaseLayout seo={seoMetaDatos}>
    
    <SliderBanner
        client:load
        slides={slides}
        i18nButton={i18n.TOUR_PAGE.CARD.BUTTON_BOOK_NOW}
    />

    <Intro
        title={i18n.PARTY_PAGE.EVENTS.TITLE}
        description={i18n.PARTY_PAGE.EVENTS.DESCRIPTION}
    />

    <section class="container mx-auto mb-10">
        <div class="px-5 py-2 text-justify">
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.INFORMATION.TEXT_1}</p>
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.INFORMATION.TEXT_2}</p>
        </div>
    </section>

    <section class="container mx-auto mb-10">
        <div class="flex flex-wrap justify-center">
            {allParties.map((party) => <PartyCard party={party} lang={lang} />)}
        </div>
    </section>

    <section class="container mx-auto mb-10">
        <div class="px-5 py-2 text-justify">
            <h2 class="font-bold text-2xl md:text-3xl text-orange-600 mb-5">{i18n.PARTY_PAGE.EVENTS.CANCUN_EVENTS.TITLE}</h2>
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.CANCUN_EVENTS.DESCRIPTION}</p>

            <h3 class="font-bold text-xl md:text-2xl text-green-700 mb-5">{i18n.PARTY_PAGE.EVENTS.SPORTS.TITLE}</h3>
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.SPORTS.DESCRIPTION}</p>

            <h3 class="font-bold text-xl md:text-2xl text-green-700 mb-5">{i18n.PARTY_PAGE.EVENTS.FAMILY_FRIENDLY.TITLE}</h3>
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.FAMILY_FRIENDLY.DESCRIPTION.TEXT_1}</p>
            <p class="text-base md:text-xl mb-5">{i18n.PARTY_PAGE.EVENTS.FAMILY_FRIENDLY.DESCRIPTION.TEXT_2}</p>

            <p class="text-center flex flex-col">
                <a href={translatedPath('/nightlife-in-cancun/')} class="font-bold text-2xl md:text-3xl mt-10 text-purple-800 hover:text-purple-600 trnasition duration-100">{i18n.PARTY_PAGE.EVENTS.BUTTONS.NIGHTCLUB}</a>
                <a href={translatedPath('/beachclub-in-cancun/')} class="font-bold text-2xl md:text-3xl my-5 text-purple-800 hover:text-purple-600 trnasition duration-100">{i18n.PARTY_PAGE.EVENTS.BUTTONS.BEACHCLUB}</a>
            </p>
        </div>
    </section>

    <Partners client:visible title={i18n.PARTNERS.TITLE} description={i18n.PARTNERS.DESCRIPTION} />

</BaseLayout>
